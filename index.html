<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Versus — Clientes y Calculadoras</title>
<style>
  :root{
    --bg:#0f1220; --panel:#151933; --muted:#8b90b3; --text:#eef0ff;
    --accent:#6dd3ff; --accent-2:#7effb2; --danger:#ff6d8b; --ring: rgba(109,211,255,.35);
    --shadow: 0 6px 24px rgba(0,0,0,.12), inset 0 1px 0 rgba(255,255,255,.03);
    --yellow:#ffd26a;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:#0e1020;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,sans-serif}
  header{position:sticky;top:0;background:#121530;border-bottom:1px solid rgba(255,255,255,.06);padding:10px 16px;z-index:10}
  h1{margin:0;font-size:18px;display:flex;gap:10px;align-items:center}
  .brand{display:inline-flex;gap:10px;align-items:center}
  .brand svg{width:28px;height:28px;filter:drop-shadow(0 2px 6px rgba(0,0,0,.35))}
  .brand .title{font-weight:700;letter-spacing:.4px}
  .status{font-size:12px;color:var(--muted)}
  #backupControls{font-size:12px;color:var(--muted);margin-top:6px;display:flex;gap:8px;flex-wrap:wrap}

  nav{display:flex;position:sticky;top:86px;z-index:9}
  nav button{flex:1;padding:12px;border:0;background:#1a1f3d;color:var(--muted);cursor:pointer;transition:color .2s ease, background .3s ease}
  nav button.active{color:var(--text);background:linear-gradient(180deg,rgba(109,211,255,.18),rgba(109,211,255,.08));border-bottom:2px solid var(--accent)}

  main{padding:14px}
  section{display:none;opacity:0;transform:translateY(6px);transition:opacity .25s ease, transform .25s ease}
  section.active{display:block;opacity:1;transform:translateY(0)}

  .card{background:#151933;border:1px solid rgba(255,255,255,.08);border-radius:12px;box-shadow:var(--shadow);padding:12px;margin-bottom:14px}
  input,textarea,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);color:var(--text);outline:none}
  textarea{min-height:80px;resize:vertical}
  select{color:#cfd3ff;background:rgba(255,255,255,.08);} 
  select option{color:#cfd3ff;background:#1b2042}

  label{font-size:12px;color:var(--muted);display:block;margin:6px 0}
  .btn{border:1px solid rgba(255,255,255,.18);background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.03));color:var(--text);padding:10px 12px;border-radius:10px;cursor:pointer}
  .btn.primary{border-color:var(--accent);background:linear-gradient(180deg,rgba(109,211,255,.35),rgba(109,211,255,.15))}
  .btn.icon{display:inline-flex;align-items:center;gap:6px}
  .grid{display:grid;gap:10px}
  .grid.two{grid-template-columns:1fr 1fr}
  @media (max-width:720px){.grid.two{grid-template-columns:1fr}}
  .muted{color:var(--muted);font-size:12px}
  .ok{color:var(--accent-2)} .bad{color:var(--danger)}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}

  /* ---------- Cliente (collapsible con flechita) ---------- */
  details.client{padding:6px 8px;border:1px solid rgba(255,255,255,.08);border-radius:12px;background:rgba(255,255,255,.04);margin-bottom:12px}
  details.client summary{list-style:none;cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:10px;padding:6px; position:relative;}
  details.client summary::-webkit-details-marker{display:none}
  .client-left{display:flex;align-items:center;gap:10px}
  .client-name{font-weight:600}
  .client-name.pending{color:var(--yellow)}
  .client-name.accepted{color:var(--accent-2)}
  .client-time{color:var(--muted);font-size:12px}
  .chev{transition:transform .2s ease}
  details[open] .chev{transform:rotate(90deg)}
  .client-body{padding:10px 4px 2px}

  .client-view{display:grid;gap:8px}
  .kv{display:grid;grid-template-columns:160px 1fr;gap:8px;align-items:center}
  .kv .k{color:var(--muted);font-size:12px}

  .client-edit{display:none;opacity:0;transform:translateY(6px);transition:opacity .2s ease, transform .2s ease}
  .editing .client-view{display:none}
  .editing .client-edit{display:block;opacity:1;transform:translateY(0)}

  /* ---- Swipe to delete (móvil) ---- */
  .swipe-wrap{position:relative; overflow:hidden; width:100%;}
  .swipe-content{position:relative; z-index:2; touch-action:pan-y; transition:transform .18s ease; width:100%;}
  .swipe-actions{position:absolute; top:0; right:0; bottom:0; display:flex; align-items:center; justify-content:flex-end; padding-right:8px; gap:8px; z-index:1; opacity:0; pointer-events:none; transition:opacity .15s ease;}
  .swipe-open .swipe-actions{ opacity:1; pointer-events:auto; }
  .swipe-actions .del{background:#CC2B3A; border:1px solid rgba(0,0,0,.2); color:#fff; padding:8px 12px; border-radius:10px; font-weight:700;}
</style>
</head>
<body>
<!-- cuerpo igual al archivo anterior pero con el fix de click en el botón -->
<script>
// ... todo el script igual, salvo en enhanceSummaryForSwipe:
// en el listener de click, añadimos comprobación para no bloquear clicks en botón .del

// dentro de enhanceSummaryForSwipe(summaryEl)
summaryEl.addEventListener('click', (ev)=>{
  if(ev.target.closest('.del')) return; // dejar pasar el click en eliminar
  const matrix = new WebKitCSSMatrix(getComputedStyle(content).transform);
  if (Math.abs(matrix.m41) > 4){
    ev.preventDefault();
    ev.stopPropagation();
    setX(0); __openSwipe=null;
  }
}, true);
</script>
</body>
</html>